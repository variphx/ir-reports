\section{Lập chỉ mục}
Trong một hệ thống truy xuất thông tin hiện đại dựa trên mô hình mạng nơ-ron, quá trình lập chỉ mục đóng vai trò như một nghi lễ khởi tạo tinh vi, nơi toàn bộ tập tài liệu \(\{d_1, d_2, d_3, \ldots, d_n\}\) được chuyển hoá từ những biểu đạt ngôn ngữ tự nhiên sang hình thức hình học có thể thao tác trong không gian vector dày đặc. Trái tim của quá trình này là mô hình BERT, hoạt động như một kiến trúc mã hóa ngữ nghĩa, cho phép hệ thống chưng cất tinh túy của từng đơn vị văn bản thành những vector có cấu trúc, mang theo ngữ nghĩa ngữ cảnh đã được nội tại hoá.

Bắt đầu từ giai đoạn đầu tiên, mỗi tài liệu \(d_i\) được trải qua chuỗi tiền xử lý bao gồm làm sạch cú pháp, chuẩn hoá ký tự, và phân đoạn nếu tài liệu vượt quá chiều dài giới hạn mà BERT có thể tiếp nhận. Các tài liệu dài sẽ được cắt thành những đơn vị nhỏ hơn -- thường là đoạn văn hoặc câu—sao cho mỗi đoạn phản ánh đầy đủ các khía cạnh ngữ nghĩa riêng biệt, đồng thời duy trì được tính nhất quán khi ánh xạ vào không gian biểu diễn. Tập các đoạn văn thu được từ mỗi \(d_i\) lúc này được xem như tập con \(\{p_1^i, p_2^i, \ldots, p_k^i\}\), nơi từng \(p_j^i\) đại diện cho một phần nhỏ nhưng mang tính phân giải cao của tài liệu \(d_i\).

Tiếp theo, từng đoạn \(p_j^i\) được đưa qua mô hình BERT hoặc Sentence-BERT, vốn đã được huấn luyện để tạo ra các biểu diễn dense, ngữ cảnh hoá sâu sắc. Vector embedding \(\mathbf{v}_{j}^{i}\) thu được cho mỗi đoạn là một điểm trong không gian \(\mathbb{R}^d\), với \(d\) là số chiều không gian vector mà mô hình BERT quy định. Tập hợp các vector \(\{\mathbf{v}_{1}^{i}, \mathbf{v}_{2}^{i}, \ldots, \mathbf{v}_{k}^{i}\}\) của mỗi tài liệu \(d_i\) lúc này chính là hình ảnh vector hoá của tài liệu đó trong không gian ngữ nghĩa được học máy.

Sau khi tất cả các đoạn trong tập tài liệu được ánh xạ thành vector, hệ thống tiến hành lưu trữ các vector embedding cùng với siêu dữ liệu (metadata) liên kết như ID tài liệu, chỉ số đoạn, hoặc thông tin ngữ cảnh mở rộng. Toàn bộ tập hợp này được cài đặt vào một cơ sở dữ liệu vector như FAISS hoặc HNSWlib, nơi cho phép tìm kiếm tương đồng hiệu quả với độ trễ thấp. Chính nhờ kho vector này, hệ thống có thể truy cập nhanh chóng tới những phần tài liệu có ý nghĩa ngữ nghĩa gần nhất với truy vấn, tạo tiền đề cho việc xếp hạng lại hoặc kết hợp với các chỉ mục sparse khác để gia tăng độ chính xác.

Quá trình lập chỉ mục với BERT như vậy là một quá trình chuyển hoá không chỉ về mặt hình thức, mà còn về bản chất biểu đạt: từ dòng văn bản tuyến tính sang những khối kiến thức ngữ nghĩa được sắp xếp trong một không gian hình học mạch lạc, nơi việc truy xuất không còn phụ thuộc vào sự trùng khớp bề mặt, mà được điều hướng bởi sự cộng hưởng ngữ nghĩa sâu xa giữa truy vấn và tài liệu.
